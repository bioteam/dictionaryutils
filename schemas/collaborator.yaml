$schema: "http://json-schema.org/draft-04/schema#"

id: "collaborator"
title: Collaborator
type: object
nodeTerms: null
category: administrative
program: '*'
project: '*'
description: Represents users who have access to the associated restricted project. This is a special node type. POSTs, PUTs, DELETEs to this node will modify Arborist policies behind the scenes. Can be thought of an abstraction on top of Arborist RBAC/ABAC.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: projects
    backref: collaborators
    label: member_of
    target_type: project
    multiplicity: many_to_one
    required: true

required:
  - submitter_id
  - email
  - access_roles

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  $ref: "_definitions.yaml#/ubiquitous_properties"

  projects:
    $ref: "_definitions.yaml#/to_one_project"
    description: >
      Indicates that the collaborator is logically part of the indicated project.
  
  email:
    description: The user's email address
    type: string
  
  access_roles:
    description: The roles that will be assigned to this collaborator policy.
    type: array

